<div [hidden]='loadingEvent'>
<agm-map
  [latitude]='centerLat'
  [longitude]='centerLng'
  [zoom]="16"
  >
  <agm-marker-cluster
    [averageCenter]='true'
    [imagePath]="'/assets/images/m/m'"
  >
    <agm-marker *ngFor='let m of this.markers; let i = index'
      [latitude]='m.lat'
      [longitude]='m.lng'
      [markerDraggable]='m.draggable'
    >
      <agm-snazzy-info-window [closeWhenOthersOpen]='true' [panOnOpen]='false'>
        <ng-template>
          <strong>({{m.lat}}, {{m.lng}})</strong>
          <button class="waves-effect waves-light btn-large"
          (click)="claimPoint(m.lat, m.lng)">
            Claim It
          </button>
        </ng-template>
      </agm-snazzy-info-window>
    </agm-marker>
  </agm-marker-cluster>
</agm-map>

<div class='row'>
  <div class='col'>
    <div class="card blue-grey darken-1">
      <div class="card-content white-text">
        <span class="card-title">{{name}}</span>
          <p>Tap on the number clusters until a marker appears. Tap a marker and press the 'CLAIM IT' button to claim it. Note that in some browsers you need to press the 'x' or click on a blank spot to cancel a marker selection.</p>
          <strong>Be Aware:</strong>
          <p>These locations were chosen arbitrarily by a computer algorithm. There are no guarantees any point is safe or accessible. For example: it could be on water, on private property, or in the middle of the road. Trust your own judgement first!</p>
      </div>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col'>
    <div class='card-panel blue-grey lighten-2 center' id='share-buttons'>
      <!-- Email -->
      <a [href]="'mailto:?Subject=Event Spacer: ' + name + '&amp;Body=Event%20 https://eventspacer.org/event/' + eventID">
        <img src="assets/images/share/email.png" alt="Email" />
      </a>

      <!-- Facebook -->
      <a [href]="'https://www.facebook.com/sharer.php?u=https%3A%2F%2Feventspacer.org%2F' + eventID" target="_blank">
        <img src="assets/images/share/facebook.png" alt="Facebook" />
      </a>

      <!-- Tumblr-->
      <a [href]="'https://www.tumblr.com/share/link?url=https://eventspacer.org/event/' + eventID + '&amp;title=Event Spacer: ' + name" target="_blank">
        <img src="assets/images/share/tumblr.png" alt="Tumblr" />
      </a>

      <!-- Twitter -->
      <a [href]="'https://twitter.com/share?url=https://eventspacer.org/event/' + eventID + '&amp;text=Event%20&amp;hashtags=eventspacer'" target='_blank'>
        <img src="assets/images/share/twitter.png" alt='Twitter' />
      </a>
    </div>
  </div>
</div>
</div>

<div class='container' [hidden]='!loadingEvent'>
<div class='row' >
  <div class='col s6 center-align'>
    <mat-spinner class='progressSpinner' [mode]="'indeterminate'">
    </mat-spinner>
  </div>
</div>
</div>
